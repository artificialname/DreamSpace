<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3M7ZVKN4G7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3M7ZVKN4G7');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Soundwave Dream Analysis</title>
      <meta name="description" content="Sublime dream analysis and dream interpretation." />
    <meta name="keywords" content="dream analysis, dream interpretation, soundwave, sleep, dream insights" />
    <meta name="robots" content="index, follow" />
    <style>
        body {
            font-family: 'Open Sans', sans-serif;
            margin: 0;
            padding: 5% 10%;
            min-height: 100vh;
            background: linear-gradient(180deg, #070D29, #1E3A8A);
            color: #ffffff;
            font-size: calc(16px + 0.2vw);
            line-height: 1.6;
            box-sizing: border-box;
        }

        a:link, a:visited {
            color: white;
            background-color: transparent;
            text-decoration: underline;
        }

        a:hover, a:active {
            color: blue;
            background-color: transparent;
            text-decoration: underline;
        }

        .header {
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 2rem 1rem;
        }

        .header-content {
            font-family: 'Courier New', monospace;
            font-size: calc(2vw + 1em);
            color: #F0F0F0;
        }

        .container {
            padding: 1rem;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            margin: 1rem 0;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
        }

        h1 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        textarea, select, button {
            width: 100%;
            margin-top: 10px;
            padding: 0.8rem;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        textarea {
            max-width: 100%;
            min-width: 100%;
            resize: vertical;
        }

        select:focus, textarea:focus {
            border-color: #007BFF;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
        }

        button {
            background-color: #007BFF;
            color: white;
            border: none;
            cursor: pointer;
            opacity: 0.6;
            pointer-events: none;
            transition: background-color 0.3s ease, opacity 0.3s ease;
        }

        button.active {
            opacity: 1;
            pointer-events: auto;
        }

        button:hover {
            background-color: #0056b3;
        }

        .dropdown-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 100%;
        }

        .error {
            border-color: red !important;
            box-shadow: 0 0 5px rgba(255, 0, 0, 0.5) !important;
        }

        #response {
            margin-top: 20px;
            padding: 1rem;
            background: linear-gradient(180deg, #070D29, #1E3A8A);
            border-radius: 10px;
            color: #ffffff;
            white-space: pre-wrap;
        }

        @media (max-width: 768px) {
            body {
                padding: 2% 5%;
                font-size: calc(14px + 0.3vw);
            }

            .header-content {
                font-size: calc(1.5em + 1vw);
            }

            .container {
                padding: 10px;
                margin: 10px 0;
            }

            textarea, select, button {
                font-size: 0.9rem;
                padding: 0.6rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            Harmonize your dreams with sound waves, receive a sublime interpretation.
        </div>
    </div>
    <div class="container">
        <div class="instructions">
            <h1>Soundwave Dream Analysis</h1>
            <p>For optimal results:</p>
            <ol>
                <li>Be sure to play the sound wave track while you sleep. <a href="https://www.youtube.com/watch?v=x4fV17_mIZU" target="_blank" rel="noopener noreferrer">You can find the track by clicking here</a>. Be sure to use your phoneâ€™s second-lowest volume setting, the sound need not be audible while awake.</li>
                <li>Once you have slept, describe your dream below in as much detail as possible.</li>
            </ol>
        </div>
        <div class="dropdown-container">
            <select id="country" aria-label="Select Country">
                <option value="">Select Country</option>
                <!-- All countries will be loaded dynamically -->
            </select>
            <select id="age" aria-label="Select Age">
                <option value="">Select Age</option>
                <option value="Under 18">Under 18</option>
                <option value="18-25">18-25</option>
                <option value="26-35">26-35</option>
                <option value="36-50">36-50</option>
                <option value="51+">51+</option>
            </select>
            <select id="soundWave" aria-label="Did you utilize the sound wave baseline?">
                <option value="">Did you utilize the sound wave baseline?</option>
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>
        </div>
        <h1>Describe your dream here:</h1>
        <textarea id="question" placeholder="Type your dream description here..." rows="5" aria-label="Dream Description"></textarea>
        <button id="analyzeButton" onclick="askChatGPT()" aria-label="Analyze Dream">Click here for dream analysis</button>
        <div id="response" aria-live="polite"></div>
    </div>
    <script>
        const analyzeButton = document.getElementById('analyzeButton');
        const countryDropdown = document.getElementById('country');
        const ageDropdown = document.getElementById('age');
        const soundWaveDropdown = document.getElementById('soundWave');
        const questionTextArea = document.getElementById('question');
        const responseDiv = document.getElementById('response');

        const countries = [
            "Afghanistan", "Albania", "Algeria", "Andorra", "Angola", "Antigua and Barbuda", "Argentina", "Armenia", "Australia", "Austria", "Azerbaijan", "Bahamas", "Bahrain", "Bangladesh", "Barbados", "Belarus", "Belgium", "Belize", "Benin", "Bhutan", "Bolivia", "Bosnia and Herzegovina", "Botswana", "Brazil", "Brunei", "Bulgaria", "Burkina Faso", "Burundi", "Cabo Verde", "Cambodia", "Cameroon", "Canada", "Central African Republic", "Chad", "Chile", "China", "Colombia", "Comoros", "Congo (Congo-Brazzaville)", "Congo (Democratic Republic)", "Costa Rica", "Croatia", "Cuba", "Cyprus", "Czech Republic", "Denmark", "Djibouti", "Dominica", "Dominican Republic", "Ecuador", "Egypt", "El Salvador", "Equatorial Guinea", "Eritrea", "Estonia", "Eswatini", "Ethiopia", "Fiji", "Finland", "France", "Gabon", "Gambia", "Georgia", "Germany", "Ghana", "Greece", "Grenada", "Guatemala", "Guinea", "Guinea-Bissau", "Guyana", "Haiti", "Honduras", "Hungary", "Iceland", "India", "Indonesia", "Iran", "Iraq", "Ireland", "Israel", "Italy", "Jamaica", "Japan", "Jordan", "Kazakhstan", "Kenya", "Kiribati", "North Korea", "South Korea", "Kuwait", "Kyrgyzstan", "Laos", "Latvia", "Lebanon", "Lesotho", "Liberia", "Libya", "Liechtenstein", "Lithuania", "Luxembourg", "Madagascar", "Malawi", "Malaysia", "Maldives", "Mali", "Malta", "Marshall Islands", "Mauritania", "Mauritius", "Mexico", "Micronesia", "Moldova", "Monaco", "Mongolia", "Montenegro", "Morocco", "Mozambique", "Myanmar", "Namibia", "Nauru", "Nepal", "Netherlands", "New Zealand", "Nicaragua", "Niger", "Nigeria", "North Macedonia", "Norway", "Oman", "Pakistan", "Palau", "Panama", "Papua New Guinea", "Paraguay", "Peru", "Philippines", "Poland", "Portugal", "Qatar", "Romania", "Russia", "Rwanda", "Saint Kitts and Nevis", "Saint Lucia", "Saint Vincent and the Grenadines", "Samoa", "San Marino", "Sao Tome and Principe", "Saudi Arabia", "Senegal", "Serbia", "Seychelles", "Sierra Leone", "Singapore", "Slovakia", "Slovenia", "Solomon Islands", "Somalia", "South Africa", "South Sudan", "Spain", "Sri Lanka", "Sudan", "Suriname", "Sweden", "Switzerland", "Syria", "Taiwan", "Tajikistan", "Tanzania", "Thailand", "Timor-Leste", "Togo", "Tonga", "Trinidad and Tobago", "Tunisia", "Turkey", "Turkmenistan", "Tuvalu", "Uganda", "Ukraine", "United Arab Emirates", "United Kingdom", "United States", "Uruguay", "Uzbekistan", "Vanuatu", "Vatican City", "Venezuela", "Vietnam", "Yemen", "Zambia", "Zimbabwe", /* truncated for brevity */
        ];

        countries.forEach(country => {
            const option = document.createElement("option");
            option.value = country;
            option.textContent = country;
            countryDropdown.appendChild(option);
        });

        function validateSelections() {
            let isValid = true;

            [countryDropdown, ageDropdown, soundWaveDropdown].forEach(select => {
                if (!select.value) {
                    select.classList.add('error');
                    isValid = false;
                } else {
                    select.classList.remove('error');
                }
            });

            if (isValid && questionTextArea.value.trim()) {
                analyzeButton.classList.add('active');
            } else {
                analyzeButton.classList.remove('active');
            }
        }

        countryDropdown.addEventListener('change', validateSelections);
        ageDropdown.addEventListener('change', validateSelections);
        soundWaveDropdown.addEventListener('change', validateSelections);
        questionTextArea.addEventListener('input', validateSelections);

async function askChatGPT() {
    const question = questionTextArea.value;

    if (!question.trim()) {
        responseDiv.textContent = 'Please enter a dream description.';
        return;
    }

    if (!analyzeButton.classList.contains('active')) {
        responseDiv.textContent = 'Please complete all selections before analyzing.';
        return;
    }

    responseDiv.textContent = 'Loading...';

    try {
        const response = await fetch('https://dreamspace-ivna.onrender.com/ask', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                question,
                country: countryDropdown.value,
                age: ageDropdown.value,
                soundWave: soundWaveDropdown.value,
            }),
        });

        const data = await response.json();

        let interpretation = data.answer || `Error: ${data.error}`;

        if (soundWaveDropdown.value === 'no') {
            interpretation = "You did not play the soundwave baseline while you were asleep, so this interpretation will not be as insightful as a synchronised dream. Next time, sleep with the baseline playing - remember, the volume can be set low. It does not need to be audible while awake. Here is your unsynchronised interpretation:\n\n" + interpretation;
        }

        // Clear previous content and add interpretation
        responseDiv.textContent = interpretation;

        // Add blank space of 75% of viewport height
        const spacer = document.createElement('div');
        spacer.style.height = '90vh';
        responseDiv.appendChild(spacer);

        // Scroll to the response section immediately
        const responseTop = responseDiv.getBoundingClientRect().top + window.scrollY;
        const headerHeight = document.querySelector('.header')?.offsetHeight || 0;

        window.scrollTo({
            top: responseTop,
            behavior: 'smooth',
        });

    } catch (error) {
        responseDiv.textContent = 'Failed to connect to the server. Please try again later.';
    }
}




</script>
</body>
</html>
